'use strict';function w(e,a,f,b){var c=e.h,d=e.i;e.g[(0>f?d+f:f)*c+(0>a?c+a:a)]=b}function z(e,a,f,b,c){var d=A,l=e.g,g=e.i;e=e.h;a=(0>f?g+f:f)*e+(0>a?e+a:a);for(--c;0<=c;c--,a++)l[a]=d[b>>c&1]}function B(e,a,f,b,c){var d=A,l=e.g,g=e.h;e=e.i;a=(0>f?e+f:f)*g+(0>a?g+a:a);for(--c;0<=c;c--,a-=g)l[a]=d[b>>c&1]};function D(e){var a=0,f=0;return function(b,c){for(f+=b;8<=f;)f-=8,e.push(a|c>>f&255),a=0;a|=(c&(1<<f)-1)<<8-f}};var A=[256,1023];function G(e,a,f){for(var b=e<<2*a,c=a;0<=c;c--){var d=b^f<<c;b=d<b?d:b}return e<<2*a|b}function H(e,a){var f=a-1,b=f-2,c=f,d=!0;return function(l){for(var g=7;0<=g;g--){do{b&1?b--:d?c?(c--,b++):(d=!1,b--):++c<f?b++:(d=!0,c--,b--);var n=(c+(6<=c))*a+(b+(6<=b))}while(e[n]);e[n]=l&1<<g?255:0}}}
function I(e,a,f){function b(){5<=g&&(d+=g);g=0}var c=e.h;e=e.g;for(var d=0,l=0,g=0,n=0,m=0;n<c;n++){for(var h=0,k=0;k<c;k++,m++){var p=e[m]>>a&1;l+=p;var q=k*c+n;p^h&1&&b();f[q]=++g;if(n)if(p===(e[m-c]>>a&1))for(var t=g,r=1;t&&r<=n;r++)t=Math.min(t,f[q-r]),f[q-r]=t,d+=(t-1)*t/2*r*3;else f[q-1]=0;h=(h&63)<<1|p;93===h&&(d+=40)}b()}d+=10*(20*Math.abs(l/(c*c)-.5)|0);for(f=0;f<c;f++){n=l=0;for(m=f;n<c;n++,m+=c)h=e[m]>>a&1,h^l&1&&b(),g++,l=(l&63)<<1|h,93===l&&(d+=40);b()}return d};export function makeQrCode(e,a){e="MLHQ".indexOf(e);if(0>e||"string"!==typeof a)throw Error("Bad args");for(var f,b=[],c=0;c<a.length;c++){var d=a.charCodeAt(c);if(55296===(64512&d)){var l=a.charCodeAt(c+1);56320===(64512&l)&&(c++,d=((d&1023)<<10|l&1023)+65536)}128>d?b.push(d):2048>d?b.push(192|d>>6,128|d&63):65536>d?b.push(224|d>>12,128|d>>6&63,128|d&63):b.push(240|d>>18,128|d>>12&63,128|d>>6&63,128|d&63)}a={A:7,m:0,u:a.length,o:b,v:null};b=24+8*b.length;f=[{j:b,l:a},{j:b+8,l:a},{j:b+8,l:a}];b=["100h0o0k100q18161c191c2410261s281o2o242q2c2s28482o4o1u4p34592c5b3c5r3g6q407a2k8a2q8q488r4s9b3cab5car3sbr44cr42db4keb6ker54fr5cgr5khr5sir5ejb6ckb4slr6smr74nr7cor",
"160g0u0h1a0j1i0n1o0q1o1618172c192c1c2k2634272s293k2a222c3s3844393k3b4k3c4k3r444b4e4b4k4r5g4s505c6c6a5s6b646c3u6s687c6g7s6o8c708s789c7g9s769s80ac88as8gbc6scc90cs","0i0l0e0r0k180k240k280s2b0c2q183a0s491c4b145p145r1c8812891k991s8c1s9r1sar1ocq2ocr1acs28h91cfc34gc1ghs3kis20kc22lc2gms2ooc30ps38rc3gss3ouc1ivs491c2l3c2t5c516s3d8s","0q0i0i0o0o160s1a0s260s290o361c381c471c491k4b1k5a2c691287246c1s8p2k8b1s9b30aq2gac1mbr3gbs2scs34ds3ces28hb3chc3uhs2gjc4kkc30ls54ms3goc3ops3eqs48sc4gts4ovc510s592c"][e];var g=1;
a=0;do{var n=(10<=g)+(27<=g);l=parseInt(b.substring(4*g-4,4*g),32);a+=l>>11}while(f[n].j>8*a&&40>=++g);if(40<g)throw Error("Data beyond QR capacity");c=a;var m=n;b=[];d=D(b);f=f[n].l.o;d(16,29092);d(m?16:8,f.length);for(n=0;n<f.length;)d(8,f[n++]);for(n=-1;b.length<c;)d(8,++n&&(n&1?236:17));c="7f7a9aa40b4475 d8c29f6fc75e5f719dc1 8949e311b111340d2e2b538478 1dc46fa3704a0a69698b849720861a 3b0d68bd44d11e08a34129e56232243b 774253787716c553f9298f8655357d634f effbb77195afc7d7f0dc4952ad4b2043d992 98b9f0056f6306dc70964524bb16e4c67979a5ae 59b383b0b6f413bd45281c891d7b43fd56dae61a91f5 7a76a946b2edd8667396e54982483d2bce01edf77fd99075 f633b7048862c7984d38ce189128d175e92a87444690924d2b5e fc091c0d12fbd09667ae6429a70cf7387577e97fb5647993b04a3ac5 d4f64d49c3c04b62054667b116d98a33b5f64819122ee44ad8c30b6a8296".split(" ")[l&
15];d=c.length/2;m=l>>4&127;l=[];f=Math.floor(a/m);n=m-a%m;for(var h=0;h<m;h++){for(var k=h*f+Math.max(0,h-n),p=l,q=p.push,t=f+(h>=n),r=c.length/2-1,E=[],x=[],u=0;u<=r;u++)E.push(parseInt(c.substring(2*u,2*u+2),16)),x.push(0);for(u=0;u<t;u++)for(var J=b[k+u]^x[0],v=0;v<=r;v++){for(var F=0,y=E[v],C=J;y&&C;)C&1&&(F^=y),C>>=1,y<<=1,y&256&&(y^=285);x[v]=(v===r?0:x[v+1])^F}q.call(p,{m:k,s:x})}c=17+4*g;m=g;h=17+4*m;g={g:Array(h*h).fill(0),h:h,i:h};for(k=7;k<h;k+=8)B(g,6,k,85,8),z(g,k,6,85,8);for(h=0;3>
h;h++){for(k=0;7>k;k++)z(g,-7*(h&1),-7*(h>>1)+k,1532159>>7*Math.min(k,6-k,2),7);z(g,-8*(h&1),2>h?7:-8,0,8);B(g,h&1?-8:7,2>h?6:-1,0,7)}if(h=2>m?0:2+m/7|0){k=17+4*m-7;p=Math.round((k-6)/(h-1));p+=p&1;for(q=[6];--h;)q.push(k),k-=p;h=q}else h=[];k=h.length;for(p=k*k;0<p--;)if(1<p&&p!==k)for(q=h[p%k],t=h[p/k|0],r=0;5>r;r++)z(g,q-2,t-2+r,22079>>5*Math.min(r,4-r),5);if(!(7>m))for(m=G(m,6,7973),h=5;0<=h;h--)k=m>>3*h,B(g,h,-9,k,3),z(g,-11,h,(k&1)<<2|k&2|(k&4)>>2,3);m=[-1,-2,-3,-4,-5,-6,-7,-8,7,5,4,3,2,1,0];
h=[0,1,2,3,4,5,7,8,-7,-6,-5,-4,-3,-2,-1];k=[];for(p=0;8>p;p++)k.push(G(e<<3|p,5,1335)^21522);for(e=m.length;0<=--e;){p=256;for(q=0;8>q;q++)p|=(k[q]>>e&1)<<q;w(g,m[e],8,p);w(g,8,h[e],p)}w(g,8,-8,A[1]);e=H(g.g,c);for(k=h=m=0;m<a;m++)e(b[l[h].m+k]),++h>=l.length&&(h=++k<f?0:n);for(a=0;a<d;a++)for(b=0;b<l.length;b++)e(l[b].s[a]);e=g.g;for(a=0;a<c;a++)for(b=0;b<c;b++)d=a*c+b,l=e[d],256>l&&(f=a*b&1,n=a*b%3,e[d]=l^(((a+b)%2&1)<<0|(a&1)<<1|(0!==b%3)<<2|(0!==(a+b)%3)<<3|((a>>1)+(b/3|0)&1)<<4|(0!==f+n)<<5|
(f+n&1)<<6|(n+(a+b&1)&1)<<7)^255);a=e=0;b=g.g.slice();for(d=0;8>d;d++)if(l=I(g,d,b),!d||l<a)e=d,a=l;e=1<<e;a=g.h;b=g.i;d=g.g;l=[];for(n=f=0;f<b;f++)for(m=g=0;m<=a;m++)m<a&&d[n++]&e?g++:g&&(l.push("M"+(4+m-g)+" "+(4+f)+".5 h"+g),g=0);return{sideLength:c+8,path:l.join(" ")}};
